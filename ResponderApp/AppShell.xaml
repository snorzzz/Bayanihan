<Shell xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
       xmlns:local="clr-namespace:ResponderApp"
       x:Class="ResponderApp.AppShell"
       Shell.NavBarIsVisible="False"
       Shell.FlyoutBehavior="Flyout">

    <!-- Top bar customization -->
    <Shell.TitleView>
        <Grid Padding="10,0"
              ColumnDefinitions="*,Auto"
              VerticalOptions="Center"
              HorizontalOptions="FillAndExpand">

            <!-- Right: User Name, Role, and Profile Icon -->
            <HorizontalStackLayout Grid.Column="1"
                                   Spacing="10"
                                   VerticalOptions="Center"
                                   HorizontalOptions="End">

                <!-- Name and Role -->
                <VerticalStackLayout Spacing="0"
                                     VerticalOptions="Center">
                    <Label x:Name="UserNameLabel"
                           FontSize="14"
                           Text="test1 user1"
                           TextColor="White"
                           HorizontalTextAlignment="End" />
                    <Label Text="Responder"
                           FontSize="12"
                           TextColor="LightGray"
                           HorizontalTextAlignment="End" />
                </VerticalStackLayout>

                <!-- Profile Icon -->
                <ImageButton Source="profilepicicon.png"
                             HeightRequest="32"
                             WidthRequest="32"
                             VerticalOptions="Center"
                             Aspect="AspectFill"
                             Clicked="OnProfileIconClicked"/>
                <!-- Added Clicked Event -->
            </HorizontalStackLayout>
        </Grid>
    </Shell.TitleView>

    <!-- Flyout Menu Items -->
    <FlyoutItem Title="Home"
                Route="home">
        <ShellContent Route="home"
                      ContentTemplate="{DataTemplate local:HomePage}" />
    </FlyoutItem>

    <FlyoutItem Title="Report"
                Route="report">
        <ShellContent Route="report"
                      ContentTemplate="{DataTemplate local:ReportPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Assessment"
                Route="assessment">
        <ShellContent Route="assessment"
                      ContentTemplate="{DataTemplate local:AssessmentPage}" />
    </FlyoutItem>

    <MenuItem Text="Logout"
              Clicked="OnLogoutClicked" />
</Shell>
